{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    /* Hide default radio buttons */
/*input[type="radio"] {*/
    /*display: flex;*/
/*    width:auto;*/
    /*h*/
/*}*/

/* Style custom radio buttons */
/*input[type="radio"] + span {*/
/*    display: inline;*/
/*    padding: 5px 10px;*/
/*    border: 1px solid #ccc;*/
/*    border-radius: 5px;*/
/*    cursor: pointer;*/
/*}*/

/* Change background color when radio button is checked */
/*input[type="radio"]:checked + span {*/
/*    background-color: #007bff;*/
/*    color: white;*/
/*}*/

</style>
<style>
       .rb-box {
        width: 80%;
        /*max-width: 420px;*/
        /*margin: 50px auto;*/
        /*padding: 1.3em;*/
        /*background: #292942;*/
        /*border-radius: 0.75em;*/
        -webkit-filter: drop-shadow(1px 2px 5px rgba(0, 0, 0, .3));
        /*filter: drop-shadow(1px 2px 5px rgba(0, 0, 0, .3));*/
        /*box-shadow: 0 2px 2px rgba(243, 49, 128, .5), 0 0px 5px rgba(243, 49, 128, .15), 0 0px 4px rgba(0, 0, 0, .35), 0 5px 20px rgba(243, 49, 128, .25), 0 15px 50px rgba(243, 49, 128, .75), inset 0 0 15px rgba(255, 255, 255, .05);*/


        .rb {
            /*padding: 16px 0;*/
            /*text-align: center;*/
            background: rgba(255, 255, 255, .03);
            border-radius: .3em;
        }

        .rb-tab {
            display: inline-block;
            position: relative;
            width: 13%;
            padding: 0px 0 5px 0;
        }
        .rb-tab p
        {
            font-weight: 600;
            text-transform: uppercase;
            margin: 0;
        }

        .rb-txt {
            position: absolute;
            top: 52%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2em;
            color: #292626;
        }


        .rb-spot {
            position: absolute;
            width: 25px;
            height: 25px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: transparent;
            /*border: 2px solid rgb(61 57 57 / 69%);*/
            /*border-radius: 100%;*/
            cursor: pointer;
            transition: ease .5s;
        }

        .rb-tab input[type="radio"] {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: pointer;
            opacity: 0;
            z-index: 1;
            /* Ensure radio button is clickable */
        }

        .rb-tab-active .rb-spot {
        background: #fff;
        /*border: 2px solid rgb(191 111 58);*/
        display: block;
        width: 40px;
        height: 40px;
        /*border-radius: 100%;*/
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        cursor: pointer;
        }

</style>
    <!-- Begin Page Banner Area -->
    <!--<div class="page-banner product-detail-banner">-->
    <!--    <div class="container">-->
    <!--        <div class="page-banner-content">-->
                
    <!--        </div>-->
    <!--    </div>-->
    <!--</div>-->
    <!-- Page Banner Area End Here -->
    <!-- Begin Product Details Area -->
    <div class="product-details pt-100">
        <div class="container">
            <div class="row">
                <!-- Begin Modal Image Area -->
                <div class="col-lg-5 col-md-5">
                     <!-- Begin Product Details Left Area -->
                    <div class="product-details-right">
                        <!-- Begin Modal Tab Content Area -->
                        <div class="tab-content product-details-tab product-details-large" id="myTabContent">
                            <div class="tab-pane fade show active" id="single-slide1" role="tabpanel" aria-labelledby="single-slide-tab-1">
                                <!--Single Product Image Start-->
                                <div class="single-product-img img-full">
                                    <img src="{{ product.prod_image.url }}" alt="{{ product.product_name }}">
                                    <a class="popup-img venobox vbox-item" href="{{ product.prod_image.url }}" data-gall="myGallery"><i class="fa fa-expand"></i></a>
                                </div>
                                <!--Single Product Image End-->
                            </div>
                            <!--<div class="tab-pane fade" id="single-slide2" role="tabpanel" aria-labelledby="single-slide-tab-2">-->
                                <!--Single Product Image Start-->
                            <!--    <div class="single-product-img img-full">-->
                            <!--        <img src="{{ product.prod_image.url }}" alt="{{ product.product_name }}">-->
                            <!--        <a class="popup-img venobox vbox-item" href="{{ product.prod_image.url }}" data-gall="myGallery"><i class="fa fa-expand"></i></a>-->
                            <!--    </div>-->
                                <!--Single Product Image End-->
                            <!--</div>-->
                            <div class="tab-pane fade" id="single-slide3" role="tabpanel" aria-labelledby="single-slide-tab-3">
                                <!--Single Product Image Start-->
                                <div class="single-product-img img-full">
                                    <img src="{{ product.prod_image2.url }}" alt="{{ product.product_name }}">
                                    <a class="popup-img venobox vbox-item" href="{{ product.prod_image2.url }}" data-gall="myGallery"><i class="fa fa-expand"></i></a>
                                </div>
                                <!--Single Product Image End-->
                            </div>
                            <div class="tab-pane fade" id="single-slide4" role="tabpanel" aria-labelledby="single-slide-tab-4">
                                <!--Single Product Image Start-->
                                <div class="single-product-img img-full">
                                    <img src="{{ product.prod_image_detail.url }}" alt="{{ product.product_name }}">
                                    <a class="popup-img venobox vbox-item" href="{{ product.prod_image_detail.url }}" data-gall="myGallery"><i class="fa fa-expand"></i></a>
                                </div>
                                <!--Single Product Image End-->
                            </div>
                            <!-- Add more tab-panes for additional images if needed -->
                
                        </div>
                        <!-- Modal Tab Content Area End Here -->
                
                        <!-- Begin Modal Tab Menu Area -->
                        
                        <!-- Modal Tab Menu End Here -->
                    </div>
                    <!-- Product Details Left Area End Here -->
                </div>

                <!-- Modal Image Area End Here -->
                <!-- Begin Product Details Right -->
                <div class="col-lg-7 col-md-7">
                    <div class="product-details-right pt-30">
                        <!-- Begin Product Details Nav Area -->
                      
                        <!-- Product Details Nav Area End Here -->
                        <!-- Begin Product Content Area -->
                        <div class="product-details-contents">
                            <h5 class="product-details-name">
                                <a href="#" title="{{product.product_name}}">{{ product.product_name }}</a>
                            </h5>
                            <div class="rating-2">
                                <!-- Assuming you have a rating field in your model -->

                            </div>
                            <div class="review">
                                <a href="#"></a>
                            </div>
                            <div class="price-box-2">
                                <span class="price">₹{{ product.discounted_price }}</span>
                                <span class="price" style="text-decoration: line-through; color:#0c0c0b73;">₹{{ product.selling_price }}</span>
                            </div>
                            <p class="short-desc">{{ product.subcategory}}&nbsp;&nbsp;({{ product.availability }})</p>
                            <!--<p class="stock"></p>-->
                            <form id="addToCartForm" class="pro-details-cart" action="{% url 'add-to-cart' product_id=product.id %}" method="post" onsubmit="return validateForm()">
                                {% csrf_token %}
                                
                                <div class="quantity">
                                    <input class="input-text qty text" step="1" min="1" max="200" name="quantity" value="1" title="Qty" size="4" type="number">
                                </div>
                                <div class="qty-cart-btn bg-white">
                                    <input class="qty-cart-btn text-white" type="submit" value="Add To Cart"/>
                                </div>
                                <div class="group-btn">
                                    <div class="qty-cart-btn qty-cart-btn-2">
                                        <a href="{% url 'add-to-wishlist' product_id=product.id %}"><i class="fa fa-heart-o"></i>Add To Wishlist</a>
                                    </div>
                                </div>
                                <div class="product-meta">
                                    <p>
                                        Categories:
                                        <a href="{% url 'product' %}">Leather Belts,</a>
                                        <a href="{% url 'product' %}">Leather Wallets & Accessories,</a>
                                        <a href="{% url 'product' %}">Combos</a>
                                    </p>
                                </div>
                                
                                {% if product.category == 'Belt' %}
                                <div class="product-meta">
                                    <div class="rb-box">
                                        <!-- Radio Button Module -->
                                        <div id="rb-1" class="rb">
                                            <label class="rb-tab">
                                                <p>Size:</p>
                                            </label>
                                            {%  for i in sizes %}
                                            <label class="rb-tab rb-tab-active">
                                                <input type="radio" name="size" value="{{ i }}" required>
                                                <span class="rb-spot">
                                                    <span class="rb-txt">{{i}}</span></span>
                                            </label>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                                {% endif %}
                            </form>

                        </div>
                        <!-- Product Content Area End Here -->
                    </div>
                    <div class="single-product-menu">
            <div class="nav single-slide-menu owl-carousel" role="tablist">
                <div class="single-tab-menu img-full">
                    <a class="active" data-bs-toggle="tab" id="single-slide-tab-1" href="#single-slide1">
                        <img src="{{ product.prod_image.url }}" alt="{{ product.product_name }}">
                    </a>
                </div>
                <!--<div class="single-tab-menu img-full">-->
                <!--    <a data-bs-toggle="tab" id="single-slide-tab-2" href="#single-slide2">-->
                <!--        <img src="{{ product.prod_image.url }}" alt="{{ product.product_name }}">-->
                <!--    </a>-->
                <!--</div>-->
                <div class="single-tab-menu img-full">
                    <a data-bs-toggle="tab" id="single-slide-tab-3" href="#single-slide3">
                        <img src="{{ product.prod_image2.url }}" alt="{{ product.product_name }}">
                    </a>
                </div>
                <div class="single-tab-menu img-full">
                    <a data-bs-toggle="tab" id="single-slide-tab-4" href="#single-slide4">
                        <img src="{{ product.prod_image_detail.url }}" alt="{{ product.product_name }}">
                    </a>
                </div>
                <!-- Add more tab-menu items for additional images if needed -->

            </div>
        </div>
                </div>
                <div class="vertical-tab-area">
                    <div class="container">
                        <div class="vertical-tab-item">
                            <div class="row g-0">
                                <div class="col-lg-3">
                                    <ul class="nav vertical-product-tabs">
                                      <li class="desc-tab active"><a data-bs-toggle="tab" href="#description">Description</a></li>
                                      <li class="review-tab"><a data-bs-toggle="tab" href="#riview">Review</a></li>
                                    </ul>
                                </div>
                                <!-- Begin Vertical Tab Content Area -->
                                <div class="col-lg-9">
                                    <div class="tab-content vertical-tab-desc">
                                      <div id="description" class="tab-pane show fade in active">
                                        <!--<p>{{product.desc }}</p>-->
                                        {% if product.subcategory == 'Reversible Belts' %}
                                        <div>
                                            <h5>Material:</h5>
                                            <p>
                                        Made from 100% Genuine Spanish Leather. All GIL® leather belts pass rigorous quality 
                                        inspections ensuring only perfect belts reach the market. All our belts are 50000 flex cycle passed.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Sizing:</h5>
                                            <p>
                                        For a perfect fit please buy belt of same waist size as of your trousers. This leather belt 
                                        has 7 holes for better fitting. This belt is perfect to wear with Jeans, Trousers and Chinos. Width of 
                                        belt is 35 mm.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Features:</h5>
                                            <p>
                                        - This is a reversible belt and can be worn from both sides by twisting and turning the buckle.<br>
                                        - Adjustable Size: You can remove the buckle to change the size of the belt according to your need.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Gifting:</h5>
                                            <p>
                                        This leather belt is perfect for gifting on all occasions and comes with a quality gift box. 
                                        You can gift this belt to family and friends.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Disclaimer:</h5>
                                            <p>
                                        Leather is a natural material and all leather hides are not same hence slight 
                                        colour variation and grain variation is not to be treated as defect. Use dry cloth to clean the 
                                        belt.
                                            </p>
                                        </div>
                                        {% elif product.subcategory == 'Casual Belts' %}
                                        
                                        <div>
                                            <h5>Material:</h5>
                                            <p>
                                        Made from 100% Genuine Leather. All GIL® leather belts pass rigorous quality 
                                        inspections ensuring only perfect belts reach the market. This belt has 3 Dimensional Embossing 
                                        finish.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Sizing:</h5>
                                            <p>
                                        For a perfect fit please buy belt of same waist size as of your trousers. This leather belt 
                                        has 7 holes for better fitting. This belt is perfect to wear with Jeans, Trousers and Chinos. Width of 
                                        belt is 40 mm.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Features:</h5>
                                            <p>
                                        - Adjustable Size: You can remove the buckle to change the size of the belt according to your need.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Gifting:</h5>
                                            <p>
                                        This leather belt is perfect for gifting on all occasions and comes with a quality gift box. 
                                        You can gift this belt to family and friends.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Disclaimer:</h5>
                                            <p>
                                        Leather is a natural material and all leather hides are not same hence slight 
                                        colour variation is not to be treated as defect.
                                            </p>
                                        </div>

                                        {% elif product.subcategory == 'Signature Belts' %}
                                        <div>
                                            <h5>Material:</h5>
                                            <p>
                                        Made from 100% Genuine Spanish Leather. All GIL® leather belts pass rigorous quality 
                                        inspections ensuring only perfect belts reach the market. All our belts are 50000 flex cycle passed.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Sizing:</h5>
                                            <p>
                                        For a perfect fit please buy belt of same waist size as of your trousers. This leather belt 
                                        has 7 holes for better fitting. This belt is perfect to wear with Jeans, Trousers and Chinos. Width of 
                                        belt is 35 mm.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Features:</h5>
                                            <p>
                                        - This is our Signature belt with premium finish Exclusive Buckle.
                                        - Adjustable Size: You can remove the buckle to change the size of the belt according to your need.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Gifting:</h5>
                                            <p>
                                        This leather belt is perfect for gifting on all occasions and comes with a quality gift box. 
                                        You can gift this belt to family and friends.
                                            </p>
                                        </div>
                                        
                                        <div>
                                            <h5>Disclaimer:</h5>
                                            <p>
                                        Leather is a natural material and all leather hides are not same hence slight 
                                        colour variation and grain variation is not to be treated as defect. Use dry cloth to clean the 
                                        belt.
                                            </p>
                                        </div>

                                        {% else %}
                                        <p>{{ product.desc }}</p>
                                        {%endif%}
                                    </div>
                                <div id="riview" class="tab-pane fade">
                                    <!-- Begin Reviws Area -->
                                    <div class="reviews">
                                        <!-- product-details.html -->
                                        <div class="comments">
                                            <h2>{{ reviews|length }} reviews for {{ product.name }}</h2>
                                            <div class="comment-list">
                                                <div class="user-img">
                                                    <img src="{% static 'images/product-details/user.png'  %}" alt="">
                                                </div>
                                                {% for review in reviews %}
                                                    <div class="user-details">
                                                        <p class="user-info"><span>{{ review.user.username }} -</span>{{ review.created_at|date:"F j, Y" }}:</p>
                                                        <div class="rating user-rating">
                                                            {% for _ in ''|center:review.rating %}
                                                                <i class="fa fa-star"></i>
                                                            {% endfor %}
                                                        </div>
                                                        <span class="user-comment">{{ review.review }}</span>
                                                    </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                        

                                    <!-- Reviws Area End Here -->
                                    <!-- Begin Feedback Area -->
                                    <div class="feedback-area">
                                        <div class="feedback">
                                            <h3 class="feedback-title">Our Feedback</h3>
                                            <form method="POST" action="{% url 'submit_review' %}">
                                                {% csrf_token %}
                                                <p class="your-opinion">
                                                    <span>
                                                        <label>Rating</label>
                                                        <select class="star-rating" name="rating">
                                                            <option value="1">1</option>
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                        </select>
                                                    </span>
                                                </p>
                                                <p class="feedback-form">
                                                    <label for="feedback">Review</label>
                                                    <input type="hidden" name="product_id" value="{{ product.id }}">
                                                    <textarea id="feedback" name="review" cols="45" rows="8" aria-required="true"></textarea>
                                                </p>
                                                <div class="feedback-input">
                                                    <p class="feedback-form-author">
                                                        <label for="author">Name<span class="required">*</span></label>
                                                        <input id="author" class="from-control" name="name" value="" size="30" aria-required="true" type="text">
                                                    </p>
                                                    <p class="feedback-form-author feedback-form-email">
                                                        <label for="email">Email<span class="required">*</span></label>
                                                        <input id="email" class="from-control" name="email" value="" size="30" aria-required="true" type="text">
                                                    </p>
                                                    <button class="form-button" type="submit"><span>Submit</span></button>
                                                </div>
                                            </form>
                                            
                                            
                                        </div>
                                    </div>
                                    <!-- Feedback Area End Here -->
                                  </div>
                                </div>
                            </div>
                                </div>
                            </div>
                    </div>
                </div>
                <!-- Product Details Right End Here -->
            </div>
        </div>
            <div class="row mb-5">
                <h4>Similar Product</h4>
                {% for n in related_products %}
                <div class="col-lg-3 col-md-6 col-sm-6">
                                        <!-- Begin Single Product Area -->
                                        <div class="single-product single-product-3 product-item belt">
                                            <!-- Begin Product Image Area -->
                                            <div class="product-img">
                                                <a href="{% url 'product-details' n.id %}">
                                                    <img class="primary-img" src="{{n.prod_image.url}}" alt="">
                                                    <img class="secondary-img" src="{{n.prod_image_detail.url}}" alt="">
                                                </a>
                                                <!-- Begin Product Action Area -->
                                                <div class="product-action">
                                                    <div class="product-action-inner">
                                                        <div class="cart">
                                                            <a href="{% url 'add-to-cart' n.id %}">
                                                                <span>Add To Cart</span>
                                                            </a>
                                                        </div>
                                                        <ul class="add-to-links">
                                                            <li class="rav-wishlist"><a
                                                                    href="{% url 'add-to-wishlist' n.id %}"
                                                                    data-bs-toggle="tooltip" title="Add To Wishlist"><i
                                                                        class="fa fa-heart-o"></i></a></li>
                                                            
                                                        </ul>
                                                    </div>
                                                </div>
                                                <!-- Product Action Area End Here -->
                                            </div>
                                            <!-- Product Image Area End Here -->
                                            <!-- Begin Product Content Area -->
                                            <div class="product-contents">
                                                <!-- Begin Product Name Area -->
                                                <h5 class="product-name">
                                                    <a href="{% url 'product-details' n.id %}"
                                                        title="{{n.product_name}}">{{n.product_name}}</a>
                                                </h5>
                                                <!-- Product Name Area End Here -->
                                                <!-- Begin Price Box Area -->
                                                <div class="price-box">
                                                    <span class="price">₹{{n.discounted_price}}</span>
                                                    <span class="old-price">₹{{n.selling_price}}</span>
                                                </div>
                                                <!-- Price Box Area End Here -->
                                                <!-- Begin Rating Area -->
                                                <div class="rating">
                                                    
                                                    <i class="fa-solid fa-star"></i>
                                                    <i class="fa-solid fa-star"></i>
                                                    <i class="fa-solid fa-star"></i>
                                                    <i class="fa-solid fa-star"></i>
                                                    <i class="fa-solid fa-star"></i>
                                                </div>
                                                <!-- Rating Area End Here -->
                                            </div>
                                            <!-- Product Content Area End Here -->
                                        </div>
                                        <!-- Single Product Area End Here -->
                                    </div>
                {% endfor %}
            </div>
    </div>
    </div>
    <!-- Product Details Area End Here -->
    <!-- Add this script at the end of your HTML file or in the head section -->
    
    <script>
        function submitReview() {
            var rating = $('#star-rating').val();
            var reviewText = $('#feedback').val();
            var author = $('#author').val();
            var email = $('#email').val();
    
            // Validate input
            if (!rating || !reviewText || !author || !email) {
                alert('Please fill in all fields');
                return;
            }
    
            // Add the new review to the comments container
            var newReview = `
                <div class="user-img">
                    <img src="{% static 'images/product-details/user.png' %}" alt="">
                </div>
                <div class="user-details">
                    <p class="user-info"><span>${author} -</span>${new Date().toLocaleDateString()}: </p>
                    <div class="rating user-rating">
                        ${'<i class="fa fa-star"></i>'.repeat(parseInt(rating))}
                    </div>
                    <span class="user-comment">${reviewText}</span>
                </div>`;
    
            $('#comments-container').append('<div class="comment-list">' + newReview + '</div>');
    
            // Update the review count
            var reviewCount = parseInt($('#review-title').text().split(' ')[0]);
            $('#review-title').text((reviewCount + 1) + ' reviews for Ornare sed consequat');
    
            // Clear the form
            $('#review-form')[0].reset();
        }
    </script>
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
     <script>
    $(document).ready(function () {
        var survey = []; //Bidimensional array: [ [1,3], [2,4] ]

        //Switcher function:
        $(".rb-tab").click(function () {
            //Spot switcher:
            $(this).parent().find(".rb-tab").removeClass("rb-tab-active");
            $(this).addClass("rb-tab-active");
        });

        //Save data:
        $(".trigger").click(function () {
            //Empty array:
            survey = [];
            //Push data:
            for (i = 1; i <= $(".rb").length; i++) {
                var rb = "rb" + i;
                var rbValue = parseInt($("#rb-" + i).find(".rb-tab-active").attr("data-value"));
                //Bidimensional array push:
                survey.push([i, rbValue]); //Bidimensional array: [ [1,3], [2,4] ]
            };
            //Debug:
            debug();
        });

        //Debug:
        function debug() {
            var debug = "";
            for (i = 0; i < survey.length; i++) {
                debug += "Nº " + survey[i][0] + " = " + survey[i][1] + "\n";
            };
            alert(debug);
        };
    });
</script>
<script>
    function validateForm() {
        var sizeSelected = false;
        var radios = document.getElementsByName("size");

        for (var i = 0; i < radios.length; i++) {
            if (radios[i].checked) {
                sizeSelected = true;
                break;
            }
        }

        if (!sizeSelected) {
            alert("Please select a size.");
            return false;
        }

        return true;
    }
</script>
{% endblock %}
